<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Numpy基本操作 | 七年的万事屋</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.0/css/all.min.css">
<link rel="shortcut icon" href="https://fade-color.github.io/favicon.ico?v=1618657950734">
<link rel="stylesheet" href="https://fade-color.github.io/styles/main.css">





<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="1. 数组创建
numpy中所有的计算都是围绕着数组进行的，因此在运算之前，我们需要将计算的数据表示成数组的形式。


我们可以用np.array()来创建一个数组：
np.array([1, 2, 3, 4, 5])
# array([1..." />
    <meta name="keywords" content="学习笔记,Python" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://fade-color.github.io">
        <img src="https://fade-color.github.io/images/avatar.png?v=1618657950734" class="site-logo">
        <h1 class="site-title">七年的万事屋</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tag/kvztIB3-U" class="site-nav">
            学习笔记
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      温故而知新
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/fade-color">七年</a> | <a class="rss" href="https://fade-color.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">Numpy基本操作</h2>
            <div class="post-date">2021-04-17</div>
            
              <div class="feature-container" style="background-image: url('https://fade-color.github.io/post-images/numpy-ji-ben-cao-zuo.png')">
              </div>
            
            <div class="post-content" v-pre>
              <h3 id="1-数组创建">1. 数组创建</h3>
<p>numpy中所有的计算都是围绕着数组进行的，因此在运算之前，我们需要将计算的数据表示成数组的形式。</p>
<ul>
<li>
<p>我们可以用<code>np.array()</code>来创建一个数组：</p>
<pre><code class="language-python">np.array([1, 2, 3, 4, 5])
# array([1, 2, 3, 4, 5])
</code></pre>
</li>
<li>
<p><code>np.zeros()</code>创建一个全为零的数组：</p>
<pre><code class="language-python">np.zeros((2, 3))  # 参数为元组，表示2行3列

# array([[0., 0.],
#        [0., 0.],
#        [0., 0.]])
</code></pre>
</li>
<li>
<p>类似地，可以使用<code>np.ones()</code>创建一个全为1的数组：</p>
<pre><code class="language-python">np.ones((2, 4))

# array([[1., 1., 1., 1.],
#        [1., 1., 1., 1.]])
</code></pre>
</li>
<li>
<p>使用<code>np.arange()</code>创建一个递增或递减的数列，类似于python的<code>range()</code>。</p>
<pre><code class="language-python">np.arange(3, 7)  # [3, 7)
# array([3, 4, 5, 6])
np.arange(3, 10, 2)
# array([3, 5, 7, 9])
np.arange(10, 2, -3)
#array([10,  7,  4])
</code></pre>
</li>
<li>
<p><code>np.linspace()</code>会返回介于某个区间等间距分布的数，前两个参数是区间的范围，第三个参数是输出样本的总数：</p>
<pre><code class="language-python"># 返回一个0-1范围内等间距分布的5个数
np.linspace(0, 1, 5)
# array([0.  , 0.25, 0.5 , 0.75, 1.  ])
</code></pre>
</li>
<li>
<p>通过<code>np.random.rand()</code>生成随机的数组(数字范围0-1)：</p>
<pre><code class="language-python">np.random.rand(2, 4)
# array([[0.90823579, 0.13280413, 0.48167232, 0.47886157],
#        [0.73089321, 0.39703329, 0.09461766, 0.5481924 ]])
</code></pre>
</li>
<li>
<p>在numpy中，数组默认的数据类型是64位的浮点数：</p>
<pre><code class="language-python">a = np.zeros((2, 4))
a.dtype
# dtype('float64')
</code></pre>
</li>
<li>
<p>可以在创建数组时，通过<code>dtype</code>指定其他的数据类型：</p>
<pre><code class="language-python">a = np.zeros((2, 4), dtype=np.int32)
a.dtype
# dtype('int32')
</code></pre>
<p>也可以通过<code>araay.astype()</code>来转换数据类型：</p>
<pre><code class="language-python">b = a.astype(int)
b
# array([[0, 0, 0, 0],
#        [0, 0, 0, 0]])
</code></pre>
</li>
</ul>
<h3 id="2-基本运算">2. 基本运算</h3>
<p>在numpy中我们可以轻松地对数组进行常见的数学运算。</p>
<ul>
<li>
<p>两个相同尺寸的数组可以直接进行四则运算，它会将数组同位置的元素进行加减乘除：</p>
<pre><code class="language-python">a = np.array([1, 2, 3])
b = np.array([4, 5, 6])
a + b
# array([5, 7, 9])
a / b
# array([0.25, 0.4 , 0.5 ])
</code></pre>
</li>
<li>
<p>在乘法运算中还有一个点乘<code>np.dot()</code>，这个函数会对两个向量进行点乘运算：</p>
<pre><code class="language-python">np.dot(a, b)
# 32
</code></pre>
</li>
<li>
<p>与之类似的还有矩阵乘法<code>np.matmul()</code></p>
<pre><code class="language-python">a = np.array([[1, 2],
              [3, 4]])
b = np.array([[2, 0],
              [0, 2]])
np.matmul(a, b)
a @ b
# array([[2, 4],
#        [6, 8]])
</code></pre>
</li>
<li>
<p>以下函数对数组中所有数依次运算：</p>
<table>
<thead>
<tr>
<th style="text-align:center">函数</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">np.sqrt()</td>
<td style="text-align:center">开方</td>
</tr>
<tr>
<td style="text-align:center">np.sin(), np.cos(), np.tan()</td>
<td style="text-align:center">三角函数运算</td>
</tr>
<tr>
<td style="text-align:center">np.log()</td>
<td style="text-align:center">自然对数</td>
</tr>
<tr>
<td style="text-align:center">np.power()</td>
<td style="text-align:center">指数</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>广播：</p>
<pre><code class="language-python">a = np.array([1, 2, 3])
a * 5
# array([5, 10, 15])
</code></pre>
<p>不同维度的数组也可以进行直接运算</p>
<pre><code class="language-python">a = np.array([[1],
              [10],
              [20]])
b = np.array([0, 1, 2])
a + b
# array([[ 1,  2,  3],
#        [10, 11, 12],
#        [20, 21, 22]])
</code></pre>
<p>在运算之前，numpy会将这两个数组扩展至相同的尺寸，然后再将相同位置的元素相加</p>
<figure data-type="image" tabindex="1"><img src="https://i.loli.net/2021/03/22/3ZAxQgTJN6GhW4H.png" alt="222" loading="lazy"></figure>
</li>
<li>
<p>常用函数：</p>
<table>
<thead>
<tr>
<th style="text-align:center">函数</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">min(), max()</td>
<td style="text-align:center">最小值，最大值</td>
</tr>
<tr>
<td style="text-align:center">argmin(), argmax()</td>
<td style="text-align:center">最小值，最大值的索引</td>
</tr>
<tr>
<td style="text-align:center">sum()</td>
<td style="text-align:center">求所有数据的总和</td>
</tr>
<tr>
<td style="text-align:center">mean()</td>
<td style="text-align:center">平均值</td>
</tr>
<tr>
<td style="text-align:center">median()</td>
<td style="text-align:center">中位数</td>
</tr>
<tr>
<td style="text-align:center">var()</td>
<td style="text-align:center">方差</td>
</tr>
<tr>
<td style="text-align:center">std()</td>
<td style="text-align:center">标准差</td>
</tr>
</tbody>
</table>
<p>对于上面的函数，如果数组为多维数组，可以通过指定axis来指定维度：</p>
<p>axis=0时，会将每一<strong>行</strong>中<strong>对应的数据</strong>相加，axis=0代表第一个维度，也就是行</p>
<figure data-type="image" tabindex="2"><img src="https://i.loli.net/2021/03/23/ztaGP1qy5TjViYX.png" alt="image-20210323091551739" loading="lazy"></figure>
<pre><code class="language-python">a = np.array([[1, 2, 3, 4, 5],
              [5, 6, 7, 8, 9]])
a.sum()  # 所有元素的和
# 50
a.sum(axis=0)  # 每行对应数据相加，也就是按列求和
# array([ 6,  8, 10, 12, 14])
</code></pre>
<p>以此类推，axis=1时代表第二个维度，也就是列</p>
<figure data-type="image" tabindex="3"><img src="https://i.loli.net/2021/03/23/PZ5OTM6wltbBmgF.png" alt="image-20210323091742759" loading="lazy"></figure>
<pre><code class="language-python">a.sum(axis=1)  # 每列对应数据相加，也就是按行求和
# array([15, 35])
</code></pre>
</li>
<li>
<p>获取元素</p>
<p>获取元素和python中list用法基本一致</p>
<pre><code class="language-python">a = np.array([[1, 2, 3],
              [4, 5, 6]])
# 获取第1行第2列的值
a[0, 1]  # a[0][1]同样
# 2
</code></pre>
<p>同样支持切片</p>
<pre><code class="language-python"># 获取第一行[0,2)列的数据
a[0, 0:2]  # a[0][0:2]
# array([1, 2])

# 获取第一行数据
a[0, :]  # a[0][:]
a[0]
# array([1, 2, 3])

# 获取第一行数据，间距为2
a[0, ::2]
# array([1, 3])

# 获取第一行数据，倒序，间距为2
a[0, ::-2]
# 等同于
a[0, -1:-4:-2]  # 倒数第一个到倒数第四个(不包括)，间距为2
# array([3, 1])

a[0, 3:0:-2]  # 从3到0(不包括0)，跨度为2
# array([3])
</code></pre>
</li>
<li>
<p>条件筛选指定元素</p>
<pre><code class="language-python">a = np.arange(10)
a
# array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])

a &lt; 2
# array([ True,  True, False, False, False, False, False, False, False,
#        False])

a[a &lt; 2]
# array([0, 1])
</code></pre>
<p>还可以通过逻辑运算符组合不同的条件，需要注意的是，与运算使用“&amp;”，或运算使用“|”</p>
<pre><code class="language-python">a[(a &gt; 3) &amp; (a % 2 == 0)]
# array([4, 6, 8])

a[(a &lt; 5) | (a % 2 == 0)]
# array([0, 1, 2, 3, 4, 6, 8])
</code></pre>
<p>不能使用类似<code>2 &lt; a &lt; 5</code>这种条件筛选</p>
<pre><code class="language-python">a[(2 &lt; a &lt; 5) | (a % 2 == 0)]  # 报错
# ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()
</code></pre>
</li>
</ul>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://fade-color.github.io/tag/kvztIB3-U/" class="tag">
                    学习笔记
                  </a>
                
                  <a href="https://fade-color.github.io/tag/h-zK4ImM2/" class="tag">
                    Python
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://fade-color.github.io/post/Jupyterlab-xian-shi-zhong-wen-zi-ti/">
                  <h3 class="post-title">
                    JupyterLab 显示中文字体
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.min.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>






  </body>
</html>
